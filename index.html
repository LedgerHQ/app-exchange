
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Documentation for Ledger Swap" name="description"/>
<link href="walkthrough/" rel="next"/>
<link href="img/Ledger-logo-696.webp" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.7.0" name="generator"/>
<title>Ledger Swap documentation</title>
<link href="assets/stylesheets/main.618322db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#ledger-swap-documentation">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Ledger Swap documentation" class="md-header__button md-logo" data-md-component="logo" href="." title="Ledger Swap documentation">
<img alt="logo" src="img/Ledger-logo-696.webp"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Ledger Swap documentation
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Introduction
            
          </span>
</div>
</div>
</div>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Ledger Swap documentation" class="md-nav__button md-logo" data-md-component="logo" href="." title="Ledger Swap documentation">
<img alt="logo" src="img/Ledger-logo-696.webp"/>
</a>
    Ledger Swap documentation
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href=".">
<span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#key-components-of-the-swap-flow">
<span class="md-ellipsis">
      
        Key Components of the Swap Flow
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="walkthrough/">
<span class="md-ellipsis">
    
  
    Enabling the SWAP on your application
  

    
  </span>
</a>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            
  
    Enabling the SWAP on your application
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="walkthrough/prerequisite/">
<span class="md-ellipsis">
    
  
    Prerequisite
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="walkthrough/run_first_test/">
<span class="md-ellipsis">
    
  
    Running an existing SWAP test
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="walkthrough/enable_the_swap_compilation/">
<span class="md-ellipsis">
    
  
    First compilation with the standard SWAP
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="walkthrough/enable_standard_app/">
<span class="md-ellipsis">
    
  
    Creating a basic SWAP test for you coin
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="walkthrough/code_the_handlers/">
<span class="md-ellipsis">
    
  
    Code the handlers
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="technical_information/">
<span class="md-ellipsis">
    
  
    Technical Information
  

    
  </span>
</a>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            
  
    Technical Information
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="technical_information/diagram/">
<span class="md-ellipsis">
    
  
    Sequence diagram
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="technical_information/protocol/">
<span class="md-ellipsis">
    
  
    Exchange Protocol API
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="technical_information/fund_and_sell/">
<span class="md-ellipsis">
    
  
    FUND and SELL flows
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="technical_information/cal/">
<span class="md-ellipsis">
    
  
    Crypto Asset List (CAL)
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="technical_information/bss/">
<span class="md-ellipsis">
    
  
    BSS safety in coin applications
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_3_7" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="technical_information/coin_application_api/">
<span class="md-ellipsis">
    
  
    Coin Application API
  

    
  </span>
</a>
<label class="md-nav__link" for="__nav_3_7" id="__nav_3_7_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_7_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_7">
<span class="md-nav__icon md-icon"></span>
            
  
    Coin Application API
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="technical_information/coin_application_api/swap_handle_check_address/">
<span class="md-ellipsis">
    
  
    handle_check_address()
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="technical_information/coin_application_api/swap_handle_get_printable_amount/">
<span class="md-ellipsis">
    
  
    handle_get_printable_amount()
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="technical_information/coin_application_api/swap_copy_transaction_parameters/">
<span class="md-ellipsis">
    
  
    copy_transaction_parameters()
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="technical_information/coin_application_api/ui_bypass/">
<span class="md-ellipsis">
    
  
    UI bypass
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="technical_information/coin_application_api/error_codes/">
<span class="md-ellipsis">
    
  
    Error codes
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="technical_information/dale/">
<span class="md-ellipsis">
    
  
    The DALE tool
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#key-components-of-the-swap-flow">
<span class="md-ellipsis">
      
        Key Components of the Swap Flow
      
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="ledger-swap-documentation">Ledger Swap documentation</h1>
<p>This documentation is designed to help you understand how the <strong>Ledger Swap</strong> feature works and to guide you through modifying your coin application to be compatible with it.</p>
<p>The <strong>Swap</strong> feature enables users to securely exchange one cryptocurrency for another directly from their Ledger device, within Ledger Wallet. It uses a trusted, multi-step process to facilitate communication between <strong>Ledger Wallet</strong>, the <strong>Trade Partner</strong>, the <strong>Exchange application</strong>, and the respective <strong>Coin applications</strong> on the device.</p>
<p>Built with robust security at every stage, the process includes cryptographic validation and transaction signatures. Final confirmation is conducted directly on the device screen, ensuring that only validated transactions are signed and authorized.</p>
<h2 id="key-components-of-the-swap-flow">Key Components of the Swap Flow</h2>
<p>The Swap process involves the following actors:</p>
<ul>
<li>The <strong>Trade Partner</strong>: Proposes a trade offer to the Ledger Wallet user, which must be clearly displayed on the device screen by the Exchange application.</li>
<li>The <strong>Ledger Wallet</strong>: initiates and manages the transaction flow between the Partner and the Exchange application.</li>
<li>The <strong>Exchange Application</strong>: serves as the intermediary between the Ledger Wallet, the involved coin applications, and the user.</li>
<li>The <strong>Coin Applications</strong>: Handle the processing for both the <strong>FROM</strong> and <strong>TO</strong> currencies involved in the swap.</li>
<li>The <strong>Ledger Crypto Asset List (CAL)</strong>: Contains HSM-signed data of all SWAP-compatible currencies that help the Exchange application display the transaction proposal content on screen. </li>
</ul>
<pre class="mermaid"><code>---
title: Swap FROM currency -&gt; TO currency actors
---
flowchart LR
    classDef invisible width:0px,height:0px,stroke-width:0px,fill:transparent;

    subgraph P[TRADE PARTNER]
        PAR@{ shape: rounded, label: "Trade partner" }
    end

    subgraph HSM[LEDGER HSM]
        CAL@{ shape: rounded, label: "Crypto&lt;br&gt;Asset List" }
    end

    subgraph LL[LEDGER LIVE]
        LLC@{ shape: rounded, label: "Ledger Wallet" }
        %% Fake node to force the Partner -&gt; Exchange line to go through the LL box
        FAKE((" ")):::invisible
    end

    subgraph D[DEVICE]
        EX@{ shape: rounded, label: "Exchange&lt;br&gt;application" }
        FROM@{ shape: rounded, label: "FROM&lt;br&gt;Coin application" }
        TO@{ shape: rounded, label: "TO&lt;br&gt;Coin application" }
        SCREEN@{ shape: rounded, label: "Device screen" }
    end

    PAR &lt;-- "&lt;div style='background:transparent;'&gt;Trade&lt;br&gt;establishment" --&gt;LLC
    PAR -- "&lt;div style='background:transparent;'&gt;Signed transaction&lt;br&gt;proposal" ---FAKE

    CAL -- "&lt;div style='background:transparent;'&gt;Coin&lt;br&gt;configurations" --- FAKE

    LLC &lt;-- "&lt;div style='background:transparent;'&gt;Final payment request&lt;br&gt;/&lt;br&gt;Signature or refusal" --&gt;FROM
    LLC &lt;-- "&lt;div style='background:transparent;'&gt;APDUs&lt;br&gt;/&lt;br&gt;RAPDUs" --&gt;EX

    EX &lt;-- "&lt;div style='background:transparent;'&gt;Format amount&lt;br&gt;Address check" --&gt;TO
    EX &lt;-- "&lt;div style='background:transparent;'&gt;Format amount&lt;br&gt;Address check&lt;br&gt;Final transaction details" --&gt;FROM
    FAKE --&gt;EX
    EX &lt;-- "&lt;div style='background:transparent;'&gt;User review" --&gt;SCREEN</code></pre>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"annotate": null, "base": ".", "features": ["navigation.indexes", "navigation.expand"], "search": "assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
<script src="assets/javascripts/bundle.e71a0d61.min.js"></script>
</body>
</html>